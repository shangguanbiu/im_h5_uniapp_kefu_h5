import{_ as e,a,s as t,n as s,g as n,K as i,E as o,Y as l,G as d,o as r,e as c,w as u,i as m,f as p,j as h,t as f,C as g,x as _,a6 as v,ab as x,Q as b}from"./index-2a18bb69.js";import{a as $}from"./yq-avatar.9c1e7a41.js";const I=a(t);const k=e({components:{avatar:$},data(){return{loginStore:I,globalConfig:I.globalConfig,userInfo:{},sexList:[{id:"2",name:this.$t("mine.no_msg")},{id:"1",name:this.$t("mine.sex_nan")},{id:"0",name:this.$t("mine.sex_nv")}],saved:!1,balance:"0.00",check_code:""}},mounted(){},methods:{to_fengmian(){s({url:"/pages/mine/run_img"})},async get_userInfo(){const e=await this.$myRuquest({url:"/api/front/user/getUserInfo",method:"POST"});200==e.code&&(this.balance=e.data.balance)},logout(){let e=n("client_id");this.$api.LoginApi.logout({client_id:e}).then((e=>{0==e.code&&I.logout()}))},textareaBInput(e){this.userInfo.motto=e.detail.value},changeSex(e){this.userInfo.sex=parseInt(e.detail.value)},async saveInfo(){if(""==this.check_code)return i({title:this.$t("usercenter.vip_p_desc10"),icon:"none"}),!1;this.saved=!0;200==(await this.$myRuquest({url:"/api/front/user/validateCode",method:"POST",data:{code:this.check_code}})).code&&i({title:this.$t("usercenter.vip_p_pop_5"),icon:"none"}),setTimeout((()=>{s({url:"/pages/mine/index"})}),2e3),setTimeout((()=>{this.saved=!1}),8e3)},setAvatar(){s({url:"/pages/mine/avatar"})},uploadAvatar(e){o({title:this.$t("mine.set_t_1")}),l({url:this.$api.msgApi.uploadAvatar,filePath:e.path,name:"file",header:{Authorization:n("authToken")},formData:{ext:"png"},success:e=>{d();let a=JSON.parse(e.data);if(0==a.code){i({title:a.msg,icon:"none"}),this.userInfo.avatar=a.data;let e=JSON.parse(JSON.stringify(this.userInfo));I.login(e)}},fail:e=>{d()}})}}},[["render",function(e,a,t,s,n,i){const o=_("cu-custom"),l=m,d=v,$=x,I=b;return r(),c(l,null,{default:u((()=>[p(o,{bgColor:"bg-gradual-pink",isBack:!0},{backText:u((()=>[])),content:u((()=>[h(f(e.$t("usercenter.l_nav6")),1)])),_:1}),p($,null,{default:u((()=>[p(l,{class:"cu-form-group align-start"},{default:u((()=>[p(l,{class:"title"},{default:u((()=>[h(f(e.$t("usercenter.vip_p_desc9")),1)])),_:1}),p(d,{maxlength:"-1",modelValue:n.check_code,"onUpdate:modelValue":a[0]||(a[0]=e=>n.check_code=e),placeholder:e.$t("usercenter.vip_p_desc10")},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),p(l,{class:"padding flex flex-direction"},{default:u((()=>[p(I,{class:"cu-btn bg-green lg",style:g(n.saved?"border: solid 1px #dbdada;":""),disabled:n.saved,onClick:a[1]||(a[1]=e=>i.saveInfo())},{default:u((()=>[h(f(e.$t("mine.save")),1)])),_:1},8,["style","disabled"])])),_:1})])),_:1})}]]);export{k as default};
