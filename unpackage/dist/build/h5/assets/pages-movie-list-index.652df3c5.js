import{_ as t,a as e,s,n as i,c as a,aH as l,aI as o,aa as n,g as p,aJ as _,o as d,e as r,w as u,i as c,f as g,j as h,t as f,l as m,r as y,F as k,q as x,v as w,m as v,x as C,k as $,z as S}from"./index-2a18bb69.js";const T=e(s);const b=t({data(){return{pop_notice:!1,active:0,top_title:this.$t("list.title"),show_more:!1,loadingType:0,page:1,State:0,type_list:[],timer:{},list:[],type_list:[],State:"",index_get:99,fromUser:"",language:T.language}},methods:{pop_ok(){i({url:"/pages/movie/kefu/kefu"})},jump(t){1==t?i({url:"/pages/movie/index/index"}):2==t?i({url:"/pages/movie/list/index"}):3==t?i({url:"/pages/movie/bet/bet"}):4==t?i({url:"/pages/kefu/kefu_index"}):5==t&&i({url:"/pages/mine/index"})},see_detail(t){0!=this.fromUser.isview||0!=this.fromUser.role?(a("movice_info",t),i({url:"/pages/movie/list/detial?id="+t.id})):this.pop_notice=!0},async get_type_list(){const t=await this.$myRuquest({url:"/api/front/movie/getTypes",method:"POST",data:{page:1}});200==t.code&&(this.type_list=t.data.data)},onClose(){},onChange(t){},openMore(){this.show_more=!this.show_more},get_type(t,e){this.page=1,this.index_get=e,this.openMore(),""!==t?(this.State=t.id,this.top_title=this.$t("list.title")+"-"+t.name):(this.State="",this.top_title=this.$t("list.title")),this.getList()},async get_userinfo(){let t=JSON.parse(JSON.stringify(T.userInfo));const e=await this.$myRuquest({url:"/api/front/index/getImUserInfo",method:"POST",data:{user_id:t.user_id}});if(200==e.code){this.fromUser=e.data;let t=JSON.parse(JSON.stringify(e.data));T.login(t)}},async getList(t){this.list=[];const e=await this.$myRuquest({method:"Post",url:"/api/front/movie/getMoreList",data:{page:this.page,pagesize:10,type_id:this.State}});200==e.code&&(this.list=e.data.list),t&&t()},async getmorelists(){if(0!==this.loadingType)return!1;this.loadingType=1,l(),this.page++;const t=await this.$myRuquest({method:"Post",url:"/api/front/movie/getMoreList",data:{page:this.page,pagesize:10,type_id:this.State}});if(200==t.code){if(t.data.list.length<1)return this.loadingType=2,void o();this.list=this.list.concat(t.data.list),this.loadingType=0,o()}}},mounted(){window.scrollTo({top:0,behavior:"smooth"})},onLoad(t){this.get_type_list(),this.getList(),n("movice_info"),this.show_more=!1;var e=document.getElementsByClassName("uni-page-head-hd")[0];e&&(e.style.display="none")},onShow(){this.get_userinfo(),this.getList(),n("movice_info"),this.fromUser=p("userInfo"),this.show_login=!1,p("token")},onPullDownRefresh(){this.page=1,this.list=[],this.getList().then((t=>_()))},onReachBottom(){null!==this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{this.getmorelists()}),1e3)}},[["render",function(t,e,s,i,a,l){const o=c,n=C("cu-custom"),p=S,_=C("Empty");return d(),r(o,null,{default:u((()=>[g(n,{bgColor:"bg-gradual-pink",isBack:!0},{content:u((()=>[h(f(a.top_title),1)])),right:u((()=>[g(o,{class:"cuIcon-more mr-10 f-16",onClick:l.openMore},null,8,["onClick"])])),_:1}),0!==a.list.length?(d(),r(o,{key:0,class:"list_are"},{default:u((()=>[(d(!0),m(k,null,y(a.list,((t,e)=>(d(),r(o,{class:"list_item",key:e,onClick:e=>l.see_detail(t)},{default:u((()=>[g(o,{class:"list_zi"},{default:u((()=>[g(o,{class:"list_img_are"},{default:u((()=>[g(p,{src:t.img,class:"list_zi_img",mode:"widthFix"},null,8,["src"])])),_:2},1024),g(o,{class:"list_foot"},{default:u((()=>[g(o,{class:"m_title"},{default:u((()=>[h(f(t.name),1)])),_:2},1024),g(o,{style:{display:"flex","align-items":"center"}},{default:u((()=>[g(o,{class:"cuIcon-cardboardfill l_ft_r",style:{"font-size":"14px"}}),g(o,{class:"l_ft_r"},{default:u((()=>[h(f(t.view_count),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(d(),r(_,{key:1,noDatatext:t.$t("list.no_data"),textcolor:"#999"},null,8,["noDatatext"])),x(g(o,{class:"type_more"},{default:u((()=>[g(o,{style:{"padding-top":"50px"}},{default:u((()=>[g(o,{class:"type_tit"},{default:u((()=>[h(f(t.$t("list.type_hot")),1)])),_:1}),g(o,{class:v(["type_zi",{type_get:99==a.index_get}]),onClick:e[0]||(e[0]=t=>l.get_type("",99))},{default:u((()=>[h(f(t.$t("list.all")),1)])),_:1},8,["class"]),(d(!0),m(k,null,y(a.type_list,((t,e)=>(d(),r(o,{class:v(["type_zi",{type_get:a.index_get==e}]),key:e,onClick:s=>l.get_type(t,e)},{default:u((()=>["zh"==a.language?(d(),r(o,{key:0},{default:u((()=>[h(f(t.name),1)])),_:2},1024)):$("",!0),"zhCN"==a.language?(d(),r(o,{key:1},{default:u((()=>[h(f(t.name_2),1)])),_:2},1024)):$("",!0),"en"==a.language?(d(),r(o,{key:2},{default:u((()=>[h(f(t.name_3),1)])),_:2},1024)):$("",!0)])),_:2},1032,["class","onClick"])))),128))])),_:1}),g(o,{class:"type_close",onClick:e[1]||(e[1]=t=>a.show_more=!1)},{default:u((()=>[h(f(t.$t("list.close")),1)])),_:1})])),_:1},512),[[w,a.show_more]]),x(g(o,null,{default:u((()=>[g(o,{class:"com_bg"}),g(o,{class:"com_main"},{default:u((()=>[g(o,{class:"pop_mian"},{default:u((()=>[g(o,{class:"pop_title"},{default:u((()=>[h(f(t.$t("pop.title")),1)])),_:1}),g(o,{style:{padding:"10px 15px",display:"flex","justify-content":"flex-start","line-height":"25px","flex-wrap":"wrap"}},{default:u((()=>[h(f(t.$t("pop.content2")),1)])),_:1}),g(o,{class:"pop_foot"},{default:u((()=>[g(o,{class:"pop_ft_btn1",onClick:e[2]||(e[2]=t=>a.pop_notice=!1)},{default:u((()=>[h(f(t.$t("pop.close")),1)])),_:1}),g(o,{class:"pop_ft_btn2",onClick:e[3]||(e[3]=t=>l.pop_ok())},{default:u((()=>[h(f(t.$t("pop.up")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},512),[[w,a.pop_notice]])])),_:1})}],["__scopeId","data-v-5b6a880f"]]);export{b as default};
