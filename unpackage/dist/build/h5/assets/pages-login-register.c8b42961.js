import{_ as e,a as t,s as a,K as s,V as o,o as r,e as i,w as l,i as n,f as u,j as c,t as d,x as m,z as g,P as p,ab as h,Q as f}from"./index-2a18bb69.js";import{p as _}from"./package.fba20730.js";const w=t(a);const F=e({data:()=>({regForm:{account:"",realname:"",password:"",repass:"",code:""},forget:!1,packData:_,globalConfig:w.globalConfig,base_url:"",time:parseInt((new Date).getTime()/1e3)}),watch:{forget(e){e&&(this.regForm.password="123456")}},mounted(){this.base_url=this.$baseurl()},methods:{isHongKongPhoneNumber:e=>/^(\+?852|0)?[6-9]\d{7}$/.test(e),run_time(){this.time=parseInt((new Date).getTime()/1e3)},handleInput(e){let t=e.detail.value.replace(/[\u4e00-\u9fa5]/g,"");this.regForm.account=t},sendCode(){if(!this.regForm.account)return s({title:"请输入账号！",icon:"none"}),!1;let e={account:this.regForm.account,type:2};this.$api.LoginApi.sendCode(e).then((e=>{s({title:e.msg,icon:"none"})}))},async check_yan_zm(){if(""==this.regForm.code)return s({title:"请输入验证码！",icon:"none"}),!1;(await this.$myRuquest({method:"Post",url:"/api/front/user/checkCode",data:{code:this.regForm.code}})).code},login(){return""==this.regForm.account?(s({title:this.$t("register.pop_tit1"),icon:"none"}),!1):""==this.regForm.realname?(s({title:this.$t("register.pop_tit2"),icon:"none"}),!1):""==this.regForm.password&&this.regForm.password.length<6&&this.regForm.password>16?(s({title:this.$t("register.pop_tit3"),icon:"none"}),!1):this.regForm.password!=this.regForm.repass?(s({title:this.$t("register.pop_tit4"),icon:"none"}),!1):void this.$api.LoginApi.register(this.regForm).then((e=>{0==e.code&&this.check_if_friend(e.data.user_id)}))},async check_if_friend(e){var t=new Array;t.push(2),t.push(e);200==(await this.$myRuquest({url:"/api/front/index/saveImUser",method:"POST",data:{users:t.toString()}})).code&&this.sendMessage(e)},async sendMessage(e){let t={id:this.$util.getUuid(),from_user:2,to_user:e,content:this.$t("welcome"),create_time:(new Date).getTime()/1e3};200==(await this.$myRuquest({url:"/api/front/index/changeImMessageData",method:"POST",data:t})).code&&setTimeout((()=>{o({url:"/pages/login/index"})}),2e3)}}},[["render",function(e,t,a,s,o,_){const w=m("cu-custom"),F=n,$=g,x=p,y=h,b=f;return r(),i(F,null,{default:l((()=>[u(w,{bgColor:"bg-gradual-pink",isBack:!0},{backText:l((()=>[])),content:l((()=>[c(d(e.$t("register.title")),1)])),_:1}),u(F,{style:{height:"100rpx"}}),u(F,{class:"padding im-flex im-rows im-justify-content-center mb-10"},{default:l((()=>[u(F,{class:"im-flex im-rows im-justify-content-center"},{default:l((()=>[u($,{class:"login-logo",src:o.globalConfig.sysInfo.logo??o.packData.logo,mode:"fixWidth"},null,8,["src"])])),_:1})])),_:1}),u(F,{class:"im-flex im-rows im-justify-content-center"},{default:l((()=>[c(d(o.globalConfig.sysInfo.name??o.packData.name),1)])),_:1}),u(y,null,{default:l((()=>[u(F,{class:"cu-form-group margin-top"},{default:l((()=>[u(F,{class:"title"},{default:l((()=>[c(d(e.$t("register.tit_l1")),1)])),_:1}),u(x,{placeholder:e.$t("register.tit_l1_p1"),class:"uni-input",maxlength:"32",name:"input",modelValue:o.regForm.account,"onUpdate:modelValue":t[0]||(t[0]=e=>o.regForm.account=e),onInput:_.handleInput},null,8,["placeholder","modelValue","onInput"])])),_:1}),u(F,{class:"cu-form-group margin-top"},{default:l((()=>[u(F,{class:"title"},{default:l((()=>[c(d(e.$t("register.tit_l2")),1)])),_:1}),u(x,{placeholder:e.$t("register.tit_l1_p2"),maxlength:"32",name:"input",modelValue:o.regForm.realname,"onUpdate:modelValue":t[1]||(t[1]=e=>o.regForm.realname=e)},null,8,["placeholder","modelValue"])])),_:1}),u(F,{class:"cu-form-group"},{default:l((()=>[u(F,{class:"title"},{default:l((()=>[c(d(e.$t("register.tit_l3")),1)])),_:1}),u(x,{placeholder:e.$t("register.tit_l1_p3"),maxlength:"32",type:"password",name:"input",modelValue:o.regForm.password,"onUpdate:modelValue":t[2]||(t[2]=e=>o.regForm.password=e)},null,8,["placeholder","modelValue"])])),_:1}),u(F,{class:"cu-form-group"},{default:l((()=>[u(F,{class:"title"},{default:l((()=>[c(d(e.$t("register.tit_l4")),1)])),_:1}),u(x,{placeholder:e.$t("register.tit_l1_p4"),maxlength:"32",type:"password",name:"input",modelValue:o.regForm.repass,"onUpdate:modelValue":t[3]||(t[3]=e=>o.regForm.repass=e)},null,8,["placeholder","modelValue"])])),_:1})])),_:1}),u(F,{class:"flex flex-direction im-login-btn"},{default:l((()=>[u(b,{class:"cu-btn lg bg-pink",onClick:t[4]||(t[4]=e=>_.login())},{default:l((()=>[c(d(e.$t("register.ok")),1)])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-8050c550"]]);export{F as default};
