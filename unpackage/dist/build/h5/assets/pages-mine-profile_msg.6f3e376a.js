import{_ as e,a,s as t,n as s,g as l,K as n,E as o,Y as i,G as u,o as r,e as d,w as f,i as c,f as m,j as g,t as h,k as p,l as _,r as I,F as x,C as $,x as b,y,P as v,a7 as k,a6 as C,ab as S,Q as V,a8 as O,ap as A}from"./index-2a18bb69.js";import{a as J}from"./yq-avatar.9c1e7a41.js";const N=a(t);const U=e({components:{avatar:J},data(){return{loginStore:N,globalConfig:N.globalConfig,userInfo:{},sexList:[{id:"2",name:this.$t("mine.no_msg")},{id:"1",name:this.$t("mine.sex_nan")},{id:"0",name:this.$t("mine.sex_nv")}],saved:!1,balance:"0.00"}},mounted(){this.get_userInfo(),this.userInfo=JSON.parse(JSON.stringify(N.userInfo))},methods:{to_fengmian(){s({url:"/pages/mine/run_img"})},async get_userInfo(){const e=await this.$myRuquest({url:"/api/front/user/getUserInfo",method:"POST"});200==e.code&&(this.balance=e.data.balance)},logout(){let e=l("client_id");this.$api.LoginApi.logout({client_id:e}).then((e=>{0==e.code&&N.logout()}))},textareaBInput(e){this.userInfo.motto=e.detail.value},changeSex(e){this.userInfo.sex=parseInt(e.detail.value)},saveInfo(){if(""==this.userInfo.realname)return n({title:this.$t("mine.set_t_1"),icon:"none"}),!1;this.saved=!0;let e={realname:this.userInfo.realname,email:this.userInfo.email,sex:this.userInfo.sex,motto:this.userInfo.motto,ages:this.userInfo.ages};this.$api.msgApi.updateUserInfo(e).then((e=>{if(0==e.code){n({title:this.$t("mine.set_t_2"),icon:"none"});let e=JSON.parse(JSON.stringify(this.userInfo));N.login(e)}})),setTimeout((()=>{this.saved=!1}),8e3)},setAvatar(){s({url:"/pages/mine/avatar"})},uploadAvatar(e){o({title:this.$t("mine.set_t_1")}),i({url:this.$api.msgApi.uploadAvatar,filePath:e.path,name:"file",header:{Authorization:l("authToken")},formData:{ext:"png"},success:e=>{u();let a=JSON.parse(e.data);if(0==a.code){n({title:a.msg,icon:"none"}),this.userInfo.avatar=a.data;let e=JSON.parse(JSON.stringify(this.userInfo));N.login(e)}},fail:e=>{u()}})}}},[["render",function(e,a,t,s,l,n){const o=b("cu-custom"),i=c,u=y,J=v,N=O,U=A,j=k,T=C,L=S,M=V;return r(),d(i,null,{default:f((()=>[m(o,{bgColor:"bg-gradual-pink",isBack:!0},{backText:f((()=>[])),content:f((()=>[g(h(e.$t("mine.title")),1)])),_:1}),m(L,null,{default:f((()=>[m(i,{class:"cu-form-group",onClick:n.to_fengmian},{default:f((()=>[m(i,{class:"title"},{default:f((()=>[g(h(e.$t("fengmian.tab1")),1)])),_:1}),m(i,{class:"text-gray"},{default:f((()=>[m(u,{class:"cuIcon-right ml-10 f-18 text-grey"})])),_:1})])),_:1},8,["onClick"]),m(i,{class:"cu-form-group"},{default:f((()=>[m(i,{class:"title"},{default:f((()=>[g(h(e.$t("mine.account")),1)])),_:1}),m(i,{class:"text-gray"},{default:f((()=>[g(h(l.userInfo.account),1)])),_:1})])),_:1}),m(i,{class:"cu-form-group"},{default:f((()=>[m(i,{class:"title"},{default:f((()=>[g(h(e.$t("mine.jifen")),1)])),_:1}),m(i,{class:"text-pink"},{default:f((()=>[g(h(l.balance),1)])),_:1})])),_:1}),m(i,{class:"cu-form-group"},{default:f((()=>[m(i,{class:"title"},{default:f((()=>[g(h(1==l.globalConfig.sysInfo.runMode?e.$t("mine.ming"):e.$t("mine.nickname")),1)])),_:1}),1==l.globalConfig.sysInfo.runMode?(r(),d(i,{key:0,class:"text-gray"},{default:f((()=>[g(h(l.userInfo.realname),1)])),_:1})):p("",!0),2==l.globalConfig.sysInfo.runMode?(r(),d(J,{key:1,class:"uni-input",style:{"text-align":"right"},modelValue:l.userInfo.realname,"onUpdate:modelValue":a[0]||(a[0]=e=>l.userInfo.realname=e),placeholder:"请输入昵称"},null,8,["modelValue"])):p("",!0)])),_:1}),m(i,{class:"cu-form-group"},{default:f((()=>[m(i,{class:"title"},{default:f((()=>[g(h(e.$t("mine.age")),1)])),_:1}),m(J,{class:"uni-input",style:{"text-align":"right"},modelValue:l.userInfo.ages,"onUpdate:modelValue":a[1]||(a[1]=e=>l.userInfo.ages=e),placeholder:e.$t("mine.age_num"),type:"number"},null,8,["modelValue","placeholder"])])),_:1}),m(i,{class:"cu-form-group"},{default:f((()=>[m(i,{class:"title"},{default:f((()=>[g(h(e.$t("mine.sex")),1)])),_:1}),m(i,null,{default:f((()=>[m(j,{onChange:n.changeSex},{default:f((()=>[(r(!0),_(x,null,I(l.sexList,(e=>(r(),d(U,{class:"radio mr-10"},{default:f((()=>[m(N,{name:"sex",value:e.id,checked:l.userInfo.sex==e.id},null,8,["value","checked"]),g(" "+h(e.name),1)])),_:2},1024)))),256))])),_:1},8,["onChange"])])),_:1})])),_:1}),m(i,{class:"cu-form-group align-start"},{default:f((()=>[m(i,{class:"title"},{default:f((()=>[g(h(e.$t("mine.sine")),1)])),_:1}),m(T,{maxlength:"-1",modelValue:l.userInfo.motto,"onUpdate:modelValue":a[2]||(a[2]=e=>l.userInfo.motto=e),placeholder:e.$t("mine.sine_place")},null,8,["modelValue","placeholder"])])),_:1})])),_:1}),m(i,{class:"padding flex flex-direction"},{default:f((()=>[m(M,{class:"cu-btn bg-green lg",style:$(l.saved?"border: solid 1px #dbdada;":""),disabled:l.saved,onClick:a[3]||(a[3]=e=>n.saveInfo())},{default:f((()=>[g(h(e.$t("mine.save")),1)])),_:1},8,["style","disabled"])])),_:1})])),_:1})}]]);export{U as default};
