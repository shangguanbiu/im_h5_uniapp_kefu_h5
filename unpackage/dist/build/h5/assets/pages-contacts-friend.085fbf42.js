import{_ as e,o as t,e as n,w as a,l as i,F as s,r,m as l,C as u,f as c,j as o,t as d,y as p,i as h,a3 as g,B as m,u as _,s as x,b as f,g as y,n as k,K as I,D as b,k as v,x as C,Q as T}from"./index-2a18bb69.js";import{r as $}from"./uni-app.es.29f8a0f7.js";import{_ as S}from"./uni-icons.57102094.js";const P=e({name:"UniSegmentedControl",emits:["clickItem"],props:{current:{type:Number,default:0},values:{type:Array,default:()=>[]},activeColor:{type:String,default:"#2979FF"},styleType:{type:String,default:"button"}},data:()=>({currentIndex:0}),watch:{current(e){e!==this.currentIndex&&(this.currentIndex=e)}},created(){this.currentIndex=this.current},methods:{_onClick(e){this.currentIndex!==e&&(this.currentIndex=e,this.$emit("clickItem",{currentIndex:e}))}}},[["render",function(e,g,m,_,x,f){const y=p,k=h;return t(),n(k,{class:l([["text"===m.styleType?"segmented-control--text":"segmented-control--button"],"segmented-control"]),style:u({borderColor:"text"===m.styleType?"":m.activeColor})},{default:a((()=>[(t(!0),i(s,null,r(m.values,((e,i)=>(t(),n(k,{class:l([["text"===m.styleType?"":"segmented-control__item--button",i===x.currentIndex&&"button"===m.styleType?"segmented-control__item--button--active":"",0===i&&"button"===m.styleType?"segmented-control__item--button--first":"",i===m.values.length-1&&"button"===m.styleType?"segmented-control__item--button--last":""],"segmented-control__item"]),key:i,style:u({backgroundColor:i===x.currentIndex&&"button"===m.styleType?m.activeColor:"",borderColor:i===x.currentIndex&&"text"===m.styleType||"button"===m.styleType?m.activeColor:"transparent"}),onClick:e=>f._onClick(i)},{default:a((()=>[c(k,null,{default:a((()=>[c(y,{style:u({color:i===x.currentIndex?"text"===m.styleType?m.activeColor:"#fff":"text"===m.styleType?"#000":m.activeColor}),class:l(["segmented-control__text","text"===m.styleType&&i===x.currentIndex?"segmented-control__item--text":""])},{default:a((()=>[o(d(e),1)])),_:2},1032,["style","class"])])),_:2},1024)])),_:2},1032,["class","style","onClick"])))),128))])),_:1},8,["class","style"])}],["__scopeId","data-v-ede2e670"]]),N={en:{"uni-pagination.prevText":"prev","uni-pagination.nextText":"next"},es:{"uni-pagination.prevText":"anterior","uni-pagination.nextText":"próxima"},fr:{"uni-pagination.prevText":"précédente","uni-pagination.nextText":"suivante"},"zh-Hans":{"uni-pagination.prevText":"上一页","uni-pagination.nextText":"下一页"},"zh-Hant":{"uni-pagination.prevText":"上一頁","uni-pagination.nextText":"下一頁"}},{t:z}=g(N);const w=e({name:"UniPagination",emits:["update:modelValue","input","change"],props:{value:{type:[Number,String],default:1},modelValue:{type:[Number,String],default:1},prevText:{type:String},nextText:{type:String},current:{type:[Number,String],default:1},total:{type:[Number,String],default:0},pageSize:{type:[Number,String],default:10},showIcon:{type:[Boolean,String],default:!1},pagerCount:{type:Number,default:7}},data:()=>({currentIndex:1,paperData:[]}),computed:{prevPageText(){return this.prevText||z("uni-pagination.prevText")},nextPageText(){return this.nextText||z("uni-pagination.nextText")},maxPage(){let e=1,t=Number(this.total),n=Number(this.pageSize);return t&&n&&(e=Math.ceil(t/n)),e},paper(){const e=this.currentIndex,t=this.pagerCount,n=this.total,a=this.pageSize;let i=[],s=[],r=Math.ceil(n/a);for(let u=0;u<r;u++)i.push(u+1);s.push(1);const l=i[i.length-(t+1)/2];return i.forEach(((n,a)=>{(t+1)/2>=e?n<t+1&&n>1&&s.push(n):e+2<=l?n>e-(t+1)/2&&n<e+(t+1)/2&&s.push(n):(n>e-(t+1)/2||r-t<n)&&n<i[i.length-1]&&s.push(n)})),r>t?((t+1)/2>=e?s[s.length-1]="...":e+2<=l?(s[1]="...",s[s.length-1]="..."):s[1]="...",s.push(i[i.length-1])):(t+1)/2>=e||e+2<=l||(s.shift(),s.push(i[i.length-1])),s}},watch:{current:{immediate:!0,handler(e,t){this.currentIndex=e<1?1:e}},value:{immediate:!0,handler(e){1===Number(this.current)&&(this.currentIndex=e<1?1:e)}}},methods:{selectPage(e,t){if(parseInt(e))this.currentIndex=e,this.change("current");else{let e=Math.ceil(this.total/this.pageSize);if(t<=1)return void(this.currentIndex-5>1?this.currentIndex-=5:this.currentIndex=1);if(t>=6)return void(this.currentIndex+5>e?this.currentIndex=e:this.currentIndex+=5)}},clickLeft(){1!==Number(this.currentIndex)&&(this.currentIndex-=1,this.change("prev"))},clickRight(){Number(this.currentIndex)>=this.maxPage||(this.currentIndex+=1,this.change("next"))},change(e){this.$emit("input",this.currentIndex),this.$emit("update:modelValue",this.currentIndex),this.$emit("change",{type:e,current:this.currentIndex})}}},[["render",function(e,u,g,_,x,f){const y=h,k=$(m("uni-icons"),S),I=p;return t(),n(y,{class:"uni-pagination"},{default:a((()=>[c(y,{class:"uni-pagination__total is-phone-hide"},{default:a((()=>[o("共 "+d(g.total)+" 条",1)])),_:1}),c(y,{class:l(["uni-pagination__btn",1===x.currentIndex?"uni-pagination--disabled":"uni-pagination--enabled"]),"hover-class":1===x.currentIndex?"":"uni-pagination--hover","hover-start-time":20,"hover-stay-time":70,onClick:f.clickLeft},{default:a((()=>[!0===g.showIcon||"true"===g.showIcon?(t(),n(k,{key:0,color:"#666",size:"16",type:"left"})):(t(),n(I,{key:1,class:"uni-pagination__child-btn"},{default:a((()=>[o(d(f.prevPageText),1)])),_:1}))])),_:1},8,["class","hover-class","onClick"]),c(y,{class:"uni-pagination__num uni-pagination__num-flex-none"},{default:a((()=>[c(y,{class:"uni-pagination__num-current"},{default:a((()=>[c(I,{class:"uni-pagination__num-current-text is-pc-hide",style:{color:"#409EFF"}},{default:a((()=>[o(d(x.currentIndex),1)])),_:1}),c(I,{class:"uni-pagination__num-current-text is-pc-hide"},{default:a((()=>[o("/"+d(f.maxPage||0),1)])),_:1}),(t(!0),i(s,null,r(f.paper,((e,i)=>(t(),n(y,{key:i,class:l([{"page--active":e===x.currentIndex},"uni-pagination__num-tag tag--active is-phone-hide"]),onClick:t=>f.selectPage(e,i)},{default:a((()=>[c(I,null,{default:a((()=>[o(d(e),1)])),_:2},1024)])),_:2},1032,["class","onClick"])))),128))])),_:1})])),_:1}),c(y,{class:l(["uni-pagination__btn",x.currentIndex>=f.maxPage?"uni-pagination--disabled":"uni-pagination--enabled"]),"hover-class":x.currentIndex===f.maxPage?"":"uni-pagination--hover","hover-start-time":20,"hover-stay-time":70,onClick:f.clickRight},{default:a((()=>[!0===g.showIcon||"true"===g.showIcon?(t(),n(k,{key:0,color:"#666",size:"16",type:"right"})):(t(),n(I,{key:1,class:"uni-pagination__child-btn"},{default:a((()=>[o(d(f.nextPageText),1)])),_:1}))])),_:1},8,["class","hover-class","onClick"])])),_:1})}],["__scopeId","data-v-84bb2583"]]),L=_(x);f(L);const D=e({name:"group",data(){return{items:[this.$t("friend.send_for_me"),this.$t("friend.send_by_me")],current:0,list:[],total:0,params:{page:1,limit:10,is_mine:0,userinfo:{}}}},created(){},mounted(){this.userinfo=y("userInfo"),this.getList()},methods:{getList(){this.$api.friendApi.applyList(this.params).then((e=>{0==e.code&&(this.list=e.data,this.total=e.count)}))},changePage(e){this.params.page=e.current,this.getList()},onClickItem(e){this.params.is_mine=e.currentIndex,this.current=e.currentIndex,this.params.page=1,this.getList()},sendMsg(e){k({url:"/pages/message/chat?id="+e})},openDetails(e){k({url:"/pages/contacts/detail?id="+e})},searchFriend(){1==this.userinfo.role?k({url:"/pages/contacts/search"}):I({title:this.$t("friend.pop_tit"),icon:"none"})},optApply(e){b({title:this.$t("friend.pop_n1"),content:this.$t("friend.pop_n2"),cancelText:this.$t("friend.pop_n3"),cancelColor:"#e54d42",confirmText:this.$t("friend.pop_n4"),success:t=>{let n=0;t.confirm&&(n=1),this.$api.friendApi.acceptApply({friend_id:e.friend_id,status:n}).then((e=>{0==e.code&&(I({title:e.msg,icon:"none"}),L.sysUnread--,this.getList())}))}})}}},[["render",function(e,l,g,_,x,f){const y=p,k=h,I=C("cu-custom"),b=$(m("uni-segmented-control"),P),S=T,N=$(m("uni-pagination"),w),z=C("Empty");return t(),n(k,null,{default:a((()=>[c(I,{bgColor:"bg-gradual-pink",isBack:!0},{backText:a((()=>[])),content:a((()=>[o(d(e.$t("friend.title")),1)])),right:a((()=>[c(k,{class:"f-20 ml-10 mr-10",onClick:l[0]||(l[0]=e=>f.searchFriend())},{default:a((()=>[c(y,{class:"cuIcon-add"})])),_:1})])),_:1}),c(b,{current:x.current,values:x.items,onClickItem:f.onClickItem,styleType:"text"},null,8,["current","values","onClickItem"]),c(k,{class:"cu-list menu"},{default:a((()=>[x.params.is_mine?v("",!0):(t(!0),i(s,{key:0},r(x.list,((i,s)=>(t(),n(k,{class:"cu-item",key:s},{default:a((()=>[c(k,{class:"cu-avatar md radius mr-15",style:u([{backgroundImage:"url("+i.create_user_info.avatar+")"}])},null,8,["style"]),c(k,{class:"content padding-tb-sm",onClick:e=>f.openDetails(i.create_user_info.user_id)},{default:a((()=>[x.params.is_mine?v("",!0):(t(),n(k,{key:0,class:"text-grey"},{default:a((()=>[c(y,{class:"text-blue"},{default:a((()=>[o(d(i.create_user_info.realname),1)])),_:2},1024),o(" "+d(e.$t("friend.replay_add")),1)])),_:2},1024)),c(k,{class:"text-gray text-sm lh-15x"},{default:a((()=>[o(d(i.remark),1)])),_:2},1024)])),_:2},1032,["onClick"]),c(k,{class:"action ml-10"},{default:a((()=>[0==i.status?(t(),n(y,{key:0,class:"text-red"},{default:a((()=>[o(d(e.$t("friend.reback")),1)])),_:1})):v("",!0),1==i.status?(t(),n(y,{key:1,class:"text-blue",onClick:e=>f.sendMsg(i.create_user_info.user_id)},{default:a((()=>[o(d(e.$t("friend.send")),1)])),_:2},1032,["onClick"])):v("",!0),2==i.status?(t(),n(S,{key:2,class:"cu-btn round sm bg-green",onClick:e=>f.optApply(i)},{default:a((()=>[o(d(e.$t("friend.control")),1)])),_:2},1032,["onClick"])):v("",!0)])),_:2},1024)])),_:2},1024)))),128)),x.params.is_mine?(t(!0),i(s,{key:1},r(x.list,((i,s)=>(t(),n(k,{class:"cu-item",key:s},{default:a((()=>[c(k,{class:"cu-avatar md radius mr-15",style:u([{backgroundImage:"url("+i.user_id_info.avatar+")"}])},null,8,["style"]),c(k,{class:"content",onClick:e=>f.openDetails(i.user_id_info.user_id)},{default:a((()=>[c(k,{class:"text-grey"},{default:a((()=>[o(" 和"),c(y,{class:"text-blue"},{default:a((()=>[o(d(i.user_id_info.realname),1)])),_:2},1024),o(" "+d(e.$t("friend.talk")),1)])),_:2},1024)])),_:2},1032,["onClick"]),c(k,{class:"action ml-10"},{default:a((()=>[0==i.status?(t(),n(y,{key:0,class:"text-red"},{default:a((()=>[o(d(e.$t("friend.jujue")),1)])),_:1})):v("",!0),1==i.status?(t(),n(y,{key:1,class:"text-blue",onClick:e=>f.sendMsg(i.user_id_info.user_id)},{default:a((()=>[o(d(e.$t("friend.retalk")),1)])),_:2},1032,["onClick"])):v("",!0),2==i.status?(t(),n(y,{key:2,class:"text-orange"},{default:a((()=>[o(d(e.$t("friend.wait_tongyi")),1)])),_:1})):v("",!0)])),_:2},1024)])),_:2},1024)))),128)):v("",!0),x.list.length?(t(),n(k,{key:2,class:"m-10"},{default:a((()=>[c(N,{current:x.params.page,total:x.total,pageSize:x.params.limit,onChange:f.changePage},null,8,["current","total","pageSize","onChange"])])),_:1})):v("",!0),x.list.length?v("",!0):(t(),n(z,{key:3,noDatatext:e.$t("friend.no_data"),textcolor:"#999"},null,8,["noDatatext"]))])),_:1})])),_:1})}]]);export{D as default};
